{
  "evaluate_math_expressions": {
    "code": "from sympy import sympify, simplify, SympifyError\n\ndef evaluate_math_expressions(expression):\n    try:\n        # Convert the expression into a sympy expression\n        expr = sympify(expression)\n        \n        # Simplify the expression to its simplest exact form\n        # Ensure result being evaluated can handle fractions/radicals as needed\n        result = simplify(expr)\n\n        if hasattr(result, 'evalf') and result.is_number:\n            return result.evalf()\n\n        return str(result)\n    except SympifyError as e:\n        return f\"Error simplifying expression: {e}\"",
    "packages": "sympy"
  },
  "solve_math_problem": {
    "code": "from sympy import symbols, solve, simplify, sympify, SympifyError, Rational, N, Eq, Matrix, factor, expand, diff, asin, acos, atan\nimport re\n\ndef solve_math_problem(problem, variables=None):\n    try:\n        # Define generic symbols for variables\n        if variables:\n            vars = symbols(' '.join(variables))\n        else:\n            vars = symbols('x y z')  # Fallback variables\n        \n        # Normalize problem string for parsing\n        problem = re.sub(r'[^\\w\\s=,()\\-+*/.^\\\\]', '', problem).replace('\\n', ' ').strip()\n\n        # Evaluate expressions and solve equations\n        results = []\n        tasks = re.split(r'(solve|compute|evaluate|simplify|factor|expand|differentiate|arcsin|arccos|arctan)', problem, flags=re.IGNORECASE)\n        for task in tasks:\n            task = task.strip()\n            if 'arcsin' in task:\n                expression = re.search(r'arcsin\\((.+)\\)', task)\n                if expression:\n                    results.append(f\"arcsin({expression.group(1)}): {asin(sympify(expression.group(1)))})\")\n            elif 'arccos' in task:\n                expression = re.search(r'arccos\\((.+)\\)', task)\n                if expression:\n                    results.append(f\"arccos({expression.group(1)}): {acos(sympify(expression.group(1)))})\")\n            elif 'arctan' in task:\n                expression = re.search(r'arctan\\((.+)\\)', task)\n                if expression:\n                    results.append(f\"arctan({expression.group(1)}): {atan(sympify(expression.group(1)))})\")\n            elif '=' in task:\n                # Solve equations\n                equations = [Eq(simplify(eq.split('=')[0]), simplify(eq.split('=')[1])) for eq in task.split(' and ') if '=' in eq]\n                sol = solve(equations, vars)\n                results.append(f\"Solution: {sol}\")\n            elif task:\n                # Attempt evaluation for symbolic computations\n                try:\n                    expr = sympify(task)\n                    result = simplify(expr)\n                    results.append(f\"Evaluation: {result}\")\n                except SympifyError as e:\n                    results.append(f\"An error occurred with expression evaluation: {e}\")\n        return results if results else \"No computational steps resolved.\"\n    except (SympifyError, TypeError, ValueError, NameError) as e:\n        return f\"An error occurred while processing the problem: {e}\"",
    "packages": "sympy"
  }
}