[
  {
    "action": "add",
    "target": {
      "code": "from sympy import sympify, simplify, SympifyError\n\ndef evaluate_math_expressions(expression):\n    try:\n        # Convert the expression into a sympy expression\n        expr = sympify(expression)\n        \n        # Simplify the expression to its simplest exact form\n        # Ensure result being evaluated can handle fractions/radicals as needed\n        result = simplify(expr)\n\n        if hasattr(result, 'evalf') and result.is_number:\n            return result.evalf()\n\n        return str(result)\n    except SympifyError as e:\n        return f\"Error simplifying expression: {e}\"",
      "description": "Evaluate arithmetic or mathematical expressions using sympy, focusing on providing exact answers with fractions or radicals when possible.",
      "name": "evaluate_math_expressions",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "from sympy import Matrix\n\ndef matrix_operations(matrix_a, matrix_b=None, operation='multiply'):\n    try:\n        mat_a = Matrix(matrix_a)\n        if operation == 'invert':\n            result = mat_a.inv()\n        elif operation == 'add' and matrix_b is not None:\n            mat_b = Matrix(matrix_b)\n            result = mat_a + mat_b\n        elif operation == 'multiply' and matrix_b is not None:\n            mat_b = Matrix(matrix_b)\n            result = mat_a * mat_b\n        else:\n            return 'Unsupported operation or missing matrix for operation.'\n        return result.tolist()\n    except Exception as e:\n        return str(e)",
      "description": "Perform operations on matrices like multiplication, addition, and inversion.",
      "name": "matrix_operations",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "import sympy as sp\nfrom sympy import symbols, simplify, solve, diff, integrate, sin, cos, tan, acos, asin, atan, Eq, sympify, Matrix\nimport re\n\ndef solve_math_problem(problem, variables=None):\n    try:\n        # Define symbols for variables if given\n        if variables:\n            vars = symbols(' '.join(variables))\n        else:\n            vars = symbols('x y z')  # Default symbols\n\n        # Check for matrix operations\n        if 'matrix' in problem or 'cross' in problem or 'inverse' in problem:\n            if 'cross' in problem:\n                vectors = re.findall(r'cross\\(\\[(.*?)\\], \\[(.*?)\\]\\)', problem)\n                if vectors:\n                    vec_a = Matrix([sympify(i) for i in vectors[0][0].split(',')])\n                    vec_b = Matrix([sympify(i) for i in vectors[0][1].split(',')])\n                    return vec_a.cross(vec_b).tolist()\n            if 'inverse' in problem:\n                matrices = re.findall(r'inverse\\(\\[(.*?)\\]\\)', problem)\n                if matrices:\n                    mat = Matrix([[sympify(num) for num in row.split(',')] for row in matrices[0].split('],[')])\n                    return mat.inv().tolist()\n\n        # Basic simplification of problem statement\n        problem = re.sub(r'[^\\w\\s=,()\\-+*/.^]', '', problem).replace('\\n', ' ').strip()\n        problem_expr = sympify(problem)\n\n        # Check for trigonometric expressions and solve accordingly\n        if 'sin' in problem.lower() or 'cos' in problem.lower() or 'tan' in problem.lower():\n            problem_expr = sympify(problem)\n            return simplify(problem_expr)\n\n        if \"solve\" in problem:\n            return sp.solve(problem_expr, vars)\n        if 'diff' in problem:\n            return [sp.diff(problem_expr, var) for var in vars]\n        if 'integrate' in problem:\n            return [sp.integrate(problem_expr, var) for var in vars]\n\n        return sp.simplify(problem_expr)\n    except Exception as e:\n        return f'Error processing task: {e}'",
      "description": "Solve math problems using sympy. Evaluate steps for differentiation, integration, and solving equations including trigonometric and matrix operations.",
      "name": "solve_math_problem",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "from sympy import sympify, simplify, sin, cos, tan, asin, acos, atan, pi, degree\nfrom sympy.parsing.sympy_parser import standard_transformations, implicit_multiplication_application\n\ntransformations = (standard_transformations + (implicit_multiplication_application,))\n\ndef evaluate_trig_expressions(expression):\n    try:\n        # Convert degree expression to radians if necessary\n        if 'degrees' in expression or '\u00b0' in expression:\n            expression = expression.replace('degrees', '*pi/180').replace('\u00b0', '*pi/180')\n        expr = sympify(expression, transformations=transformations)\n        result = simplify(expr)\n        # For more accurate results convert evaluated expressions to float\n        if isinstance(result, (sin, cos, tan, asin, acos, atan)):\n            return result.evalf()\n        return result\n    except Exception as e:\n        return str(e)",
      "description": "Evaluate trigonometric expressions provided as strings, supporting operations like simplification, conversion of degrees to radians, and calculation of trigonometric functions.",
      "name": "evaluate_trig_expressions",
      "packages": "sympy"
    }
  }
]