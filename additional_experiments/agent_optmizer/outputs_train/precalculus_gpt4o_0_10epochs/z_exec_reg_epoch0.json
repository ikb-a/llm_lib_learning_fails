{
  "evaluate_math_expressions": {
    "code": "from sympy import sympify, simplify, SympifyError\n\ndef evaluate_math_expressions(expression):\n    try:\n        # Convert the expression into a sympy expression\n        expr = sympify(expression)\n        \n        # Simplify the expression to its simplest exact form\n        # Ensure result being evaluated can handle fractions/radicals as needed\n        result = simplify(expr)\n\n        if hasattr(result, 'evalf') and result.is_number:\n            return result.evalf()\n\n        return str(result)\n    except SympifyError as e:\n        return f\"Error simplifying expression: {e}\"",
    "packages": "sympy"
  },
  "solve_math_problem": {
    "code": "from sympy import symbols, solve, simplify, sympify, SympifyError, Rational, N\n\ndef solve_math_problem(problem):\n    try:\n        # Parse the problem into steps\n        steps = problem.split('\\n')\n        results = []\n\n        for step in steps:\n            if '=' in step:\n                # Solve equations if found\n                equation = sympify(step)\n                neq = solve(equation)\n                # Attempt to numerically verify solution for accuracy\n                verified_solution = [(val, N(val)) for val in neq]\n                results.append(f\"Solution: {verified_solution}\")\n            else:\n                if any(op in step for op in ['+', '-', '*', '/']):\n                    # Evaluate arithmetic expressions\n                    expr = sympify(step)\n                    result = simplify(expr)\n                    # Perform numerical evaluation for expressions\n                    numerical_result = N(result)\n                    if result.is_number:\n                        results.append(f\"Result: {numerical_result}\")\n                    else:\n                        results.append(f\"Symbolic Result: {result}\")\n                else:\n                    # Handle single variable or other outputs\n                    expr = sympify(step)\n                    if isinstance(expr, Rational):\n                        results.append(f\"Rational Evaluation: {expr}\")\n                    else:\n                        results.append(f\"Evaluation: {expr}\")\n\n        return results if results else \"No solutions/steps found.\"\n    except SympifyError as e:\n        return f\"An error occurred while processing the problem: {e}\"",
    "packages": "sympy"
  }
}