[
  {
    "action": "add",
    "target": {
      "code": "from sympy import sympify, simplify, SympifyError\n\ndef evaluate_math_expressions(expression):\n    try:\n        # Convert the expression into a sympy expression\n        expr = sympify(expression)\n        \n        # Simplify the expression to its simplest exact form\n        # Ensure result being evaluated can handle fractions/radicals as needed\n        result = simplify(expr)\n\n        if hasattr(result, 'evalf') and result.is_number:\n            return result.evalf()\n\n        return str(result)\n    except SympifyError as e:\n        return f\"Error simplifying expression: {e}\"",
      "description": "Evaluate arithmetic or mathematical expressions using sympy, focusing on providing exact answers with fractions or radicals when possible.",
      "name": "evaluate_math_expressions",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "from sympy import symbols, simplify, solve, diff, integrate, sin, cos, tan, acos, asin, atan, Eq, sympify\nimport re\n\ndef solve_math_problem(problem, variables=None):\n    try:\n        # Define symbols for variables if given\n        if variables:\n            vars = symbols(' '.join(variables))\n        else:\n            vars = symbols('x y z')  # Default symbols\n\n        # Basic simplification of problem statement\n        problem = re.sub(r'[^\\w\\s=,()\\-+*/.^]', '', problem).replace('\\n', ' ').strip()\n\n        # Handle computation tasks\n        results = []\n        tasks = re.split(r'(?i)(solve|compute|evaluate|simplify|factor|expand|differentiate|integrate|arcsin|arccos|arctan)', problem)\n        operation = None\n        for task in tasks:\n            task = task.strip().lower()\n            if task in ['solve', 'compute', 'evaluate', 'simplify', 'factor', 'expand', 'differentiate', 'integrate', 'arcsin', 'arccos', 'arctan']:\n                operation = task\n            elif operation:\n                try:\n                    expr = sympify(task)\n                    if operation == 'solve' and '=' in task:\n                        lhs, rhs = [sympify(side) for side in task.split('=')]\n                        result = solve(Eq(lhs, rhs), vars)\n                    elif operation == 'differentiate':\n                        result = [diff(expr, var) for var in vars]\n                    elif operation == 'integrate':\n                        result = [integrate(expr, var) for var in vars]\n                    elif operation == 'arcsin':\n                        result = asin(expr)\n                    elif operation == 'arccos':\n                        result = acos(expr)\n                    elif operation == 'arctan':\n                        result = atan(expr)\n                    else:\n                        result = simplify(expr)\n                    results.append(result)\n                except Exception as e:\n                    results.append(str(e))\n        return results if results else 'No computational steps resolved.'\n    except Exception as e:\n        return f'Error processing task: {e}'",
      "description": "Solve math problems using sympy. Evaluate steps for differentiation, integration, and solving equations.",
      "name": "solve_math_problem",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "from sympy import sympify, degree, pi, simplify\nfrom sympy.parsing.sympy_parser import standard_transformations, implicit_multiplication_application\n\ntransformations = (standard_transformations + (implicit_multiplication_application,))\n\ndef evaluate_trig_expressions(expression):\n    try:\n        # Convert degree expression to radians if necessary\n        if 'degrees' in expression:\n            expression = expression.replace('degrees', '*pi/180')  # Convert degrees to radians\n        expr = sympify(expression, transformations=transformations)\n        result = simplify(expr)\n        return result\n    except Exception as e:\n        return str(e)",
      "description": "Evaluate trigonometric expressions provided as strings, supporting operations like simplification and conversion of degrees to radians.",
      "name": "evaluate_trig_expressions",
      "packages": "sympy"
    }
  }
]