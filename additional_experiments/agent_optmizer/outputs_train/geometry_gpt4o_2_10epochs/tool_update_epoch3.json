[
  {
    "action": "add",
    "target": {
      "code": "from sympy import symbols, Eq, solve, sympify, SympifyError, simplify, cancel\n\ndef evaluate_algebra(expression, variable_values={}):\n    try:\n        # Parse the expression into individual parts safely\n        expressions = [e.strip() for e in expression.replace(';', ',').split(',')]\n        exprs = []\n        for expr in expressions:\n            expr = expr.replace('=', '==')  # Adjust for equal signs in equations\n            try:\n                exprs.append(sympify(expr, locals=variable_values, evaluate=False))\n            except SympifyError as e:\n                return {\"error\": str(e)}\n        solutions = []\n        for expr in exprs:\n            expr = simplify(cancel(expr))  # Simplify the expression\n            if isinstance(expr, Eq):\n                solutions.append(solve(expr, dict=True))\n            elif variable_values:\n                expr = expr.subs(variable_values)\n                solutions.append(expr)\n            else:\n                solutions.append(expr)\n        return solutions\n    except Exception as error:\n        return {'error': str(error)}",
      "description": "Evaluate and solve algebraic expressions and equations provided as strings which can contain multiple expressions separated by commas or semicolons. It now handles syntax issues and symbol management better.",
      "name": "evaluate_algebra",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "from sympy import symbols, solve, Eq, sin, cos, sqrt, pi, deg, rad\n\ndef solve_triangle_properties(side1, side2, side3, angle_unit='degrees'):\n    a, b, c = side1, side2, side3\n    if angle_unit == 'degrees':\n        unit = pi / 180\n    else:\n        unit = 1\n\n    # Calculate angles using Law of Cosines\n    angle_A_rad = cos((b**2 + c**2 - a**2) / (2 * b * c))\n    angle_B_rad = cos((a**2 + c**2 - b**2) / (2 * a * c))\n    angle_C_rad = cos((a**2 + b**2 - c**2) / (2 * a * b))\n    \n    # Convert angles to the desired unit\n    angle_A = angle_A_rad / unit\n    angle_B = angle_B_rad / unit\n    angle_C = angle_C_rad / unit\n\n    # Calculate area (Heron's Formula)\n    s = (a + b + c) / 2\n    area = sqrt(s * (s - a) * (s - b) * (s - c))\n\n    # Calculate medians using Apollonius's theorem\n    median_a = sqrt(2*b**2 + 2*c**2 - a**2) / 2\n    median_b = sqrt(2*a**2 + 2*c**2 - b**2) / 2\n    median_c = sqrt(2*a**2 + 2*b**2 - c**2) / 2\n\n    # Calculate heights for each side\n    height_a = 2 * area / a\n    height_b = 2 * area / b\n    height_c = 2 * area / c\n\n    properties = {\n        \"angles\": {\n            \"A\": angle_A,\n            \"B\": angle_B,\n            \"C\": angle_C\n        },\n        \"area\": area,\n        \"medians\": {\n            \"median_a\": median_a,\n            \"median_b\": median_b,\n            \"median_c\": median_c\n        },\n        \"heights\": {\n            \"height_a\": height_a,\n            \"height_b\": height_b,\n            \"height_c\": height_c\n        }\n    }\n    return properties",
      "description": "Solve various standard triangle properties, including calculating heights, medians, angles, and area given different initial parameters.",
      "name": "solve_triangle_properties",
      "packages": "sympy"
    }
  },
  {
    "action": "add",
    "target": {
      "code": "from sympy import sympify, SympifyError, pprint\n\ndef evaluate_expression(expression):\n    try:\n        # Use sympify to convert the expression to a symbolic form\n        # Ensure to evaluate expressions with special handling for accuracy\n        result = sympify(expression, evaluate=True)\n        pprint(f\"Expression: {expression} => Result: {result}\")\n        return result\n    except SympifyError as e:\n        error_message = f\"Error evaluating expression '{expression}': {str(e)}\"\n        pprint(error_message)\n        return error_message",
      "description": "Evaluate arithmetic or mathematical expressions provided as strings. Now improved to handle expressions specifically involving powers, fractions, and decimals more effectively. Additionally, provide more informative error messages for debugging.",
      "name": "evaluate_expression",
      "packages": "sympy"
    }
  }
]