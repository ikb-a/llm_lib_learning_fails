{
  "evaluate_algebra": {
    "code": "from sympy import sympify, SympifyError, symbols, Eq, solve, simplify, cancel, Rational\n\ndef evaluate_algebra(expression, variable_values={}):\n    try:\n        expressions = expression.replace('\\n', '').replace('==', '=').replace('=', '==').replace(';', ',').split(',')\n        expressions = [e.strip() for e in expressions if e.strip()]\n        exprs = []\n\n        for expr in expressions:\n            expr = expr.strip()\n            try:\n                sym_expr = sympify(expr, locals=variable_values, evaluate=False)\n                exprs.append(sym_expr)\n            except SympifyError as e:\n                return {'error': f'Failed to sympify expression: {expr}. Error: {str(e)}'}\n\n        solutions = []\n        for expr in exprs:\n            expr = simplify(cancel(expr))\n            if isinstance(expr, Eq):\n                solutions.append(solve(expr, dict=True))\n            elif variable_values:\n                expr = expr.subs(variable_values)\n                solutions.append(expr)\n            else:\n                solutions.append(expr)\n\n        return solutions\n    except Exception as error:\n        return {'error': 'Overall expression error: ' + str(error)}",
    "packages": "sympy"
  },
  "evaluate_expression": {
    "code": "from sympy import sympify, SympifyError\n\ndef evaluate_expression(expression):\n    try:\n        result = sympify(expression)\n        if result.is_number:\n            result = float(result)\n        else:\n            result = str(result)\n        return result\n    except SympifyError as e:\n        return str(e)",
    "packages": "sympy"
  },
  "evaluate_trigonometric": {
    "code": "from sympy import symbols, Eq, solve, sympify, sin, cos, tan, simplify, cancel, SympifyError, sqrt, pi\n\ndef evaluate_trigonometric(expression, variable_values={}):\n    try:\n        # Split expressions if they are separated by commas or semicolons\n        expr_list = [e.strip() for part in expression.split(',') for e in part.split(';')]\n        solutions = []\n        for expr in expr_list:\n            try:\n                parsed_expr = sympify(expr, evaluate=False)\n                parsed_expr = parsed_expr.rewrite(sin).rewrite(cos).rewrite(tan)\n                parsed_expr = simplify(cancel(parsed_expr))\n                if isinstance(parsed_expr, Eq):\n                    solutions.append(solve(parsed_expr, dict=True))\n                elif variable_values:\n                    parsed_expr = parsed_expr.subs(variable_values)\n                    solutions.append(parsed_expr)\n                else:\n                    solutions.append(parsed_expr)\n            except SympifyError as se:\n                solutions.append({'error': f'Sympify error: {str(se)}'})\n            except Exception as e:\n                solutions.append({'error': str(e)})\n        return solutions\n    except Exception as outer_error:\n        return {'error': str(outer_error)}",
    "packages": "sympy"
  },
  "solve_triangle_properties": {
    "code": "from sympy import symbols, solve, Eq, sin, cos, sqrt, pi, deg, rad\n\ndef solve_triangle_properties(side1, side2, side3, angle_unit='degrees'):\n    a, b, c = side1, side2, side3\n    if angle_unit == 'degrees':\n        unit = pi / 180\n    else:\n        unit = 1\n\n    # Calculate angles using Law of Cosines\n    angle_A_rad = cos((b**2 + c**2 - a**2) / (2 * b * c))\n    angle_B_rad = cos((a**2 + c**2 - b**2) / (2 * a * c))\n    angle_C_rad = cos((a**2 + b**2 - c**2) / (2 * a * b))\n    \n    # Convert angles to the desired unit\n    angle_A = angle_A_rad / unit\n    angle_B = angle_B_rad / unit\n    angle_C = angle_C_rad / unit\n\n    # Calculate area (Heron's Formula)\n    s = (a + b + c) / 2\n    area = sqrt(s * (s - a) * (s - b) * (s - c))\n\n    # Calculate medians using Apollonius's theorem\n    median_a = sqrt(2*b**2 + 2*c**2 - a**2) / 2\n    median_b = sqrt(2*a**2 + 2*c**2 - b**2) / 2\n    median_c = sqrt(2*a**2 + 2*b**2 - c**2) / 2\n\n    # Calculate heights for each side\n    height_a = 2 * area / a\n    height_b = 2 * area / b\n    height_c = 2 * area / c\n\n    properties = {\n        \"angles\": {\n            \"A\": angle_A,\n            \"B\": angle_B,\n            \"C\": angle_C\n        },\n        \"area\": area,\n        \"medians\": {\n            \"median_a\": median_a,\n            \"median_b\": median_b,\n            \"median_c\": median_c\n        },\n        \"heights\": {\n            \"height_a\": height_a,\n            \"height_b\": height_b,\n            \"height_c\": height_c\n        }\n    }\n    return properties",
    "packages": "sympy"
  }
}