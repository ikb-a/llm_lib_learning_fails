{
  "calculate_plane_equation": {
    "code": "from sympy import Matrix\n\ndef calculate_plane_equation(point1, point2, point3):\n    # Create vectors from the points\n    v1 = Matrix([point2[i] - point1[i] for i in range(3)])\n    v2 = Matrix([point3[i] - point1[i] for i in range(3)])\n    \n    # Compute cross product to get normal vector\n    normal_vector = v1.cross(v2)\n    \n    # Plane coefficients from normal vector\n    A, B, C = normal_vector\n    D = - (A * point1[0] + B * point1[1] + C * point1[2])\n    return A, B, C, D",
    "packages": "sympy"
  },
  "evaluate_expression": {
    "code": "from sympy import sympify, SympifyError\n\ndef evaluate_expression(expression):\n    try:\n        result = sympify(expression)\n        if result.is_number:\n            result = float(result)\n        else:\n            result = str(result)\n        return result\n    except SympifyError as e:\n        return str(e)",
    "packages": "sympy"
  },
  "execute_math_code": {
    "code": "import sympy as sp\n\ndef execute_math_code(problem_code):\n    exec_globals = {\n        'sqrt': sp.sqrt,\n        'pi': sp.pi,\n        'acos': sp.acos,\n        'asin': sp.asin,\n        'atan2': sp.atan2,\n        'sin': sp.sin,\n        'cos': sp.cos,\n        'tan': sp.tan,\n        'Rational': sp.Rational,\n        'Matrix': sp.Matrix,\n        'symbols': sp.symbols,\n        'solve': sp.solve,\n        'Eq': sp.Eq,\n        'sympify': sp.sympify,\n        'simplify': sp.simplify,\n        'rad': sp.rad,\n        'nsimplify': sp.nsimplify,\n        'summation': sp.summation,\n        'deg': sp.deg,\n        'Interval': sp.Interval,\n        'Union': sp.Union,\n        'complement': sp.complement,\n        'solveset': sp.solveset,\n        'Symbol': sp.Symbol,\n        'Piecewise': sp.Piecewise,\n        'Mod': sp.Mod,\n        'ceil': sp.ceil,\n        'floor': sp.floor,\n        'Abs': sp.Abs\n    }\n    exec_locals = {}\n    try:\n        exec(problem_code, exec_globals, exec_locals)\n        return exec_locals.get('result', 'No result found')\n    except Exception as e:\n        return str(e)",
    "packages": "sympy"
  },
  "simplify_trig_expression": {
    "code": "import sympy as sp\n\ndef simplify_trig_expression(expression):\n    expr = sp.sympify(expression)\n    simplified_expr = sp.simplify(expr)\n    return simplified_expr",
    "packages": "sympy"
  },
  "transform_and_solve": {
    "code": "import sympy as sp\nimport numpy as np\n\n# Revised function to address SymPy compatibility issues\n\ndef transform_and_solve(problem_code):\n    # Define the safe namespace for sure\n    exec_globals = {\n        '__builtins__': None,\n        'sqrt': sp.sqrt,\n        'pi': sp.pi,\n        'acos': sp.acos,\n        'asin': sp.asin,\n        'atan2': sp.atan2,\n        'sin': sp.sin,\n        'cos': sp.cos,\n        'tan': sp.tan,\n        'Rational': sp.Rational,\n        'Matrix': sp.Matrix,\n        'symbols': sp.symbols,\n        'solve': sp.solve,\n        'Eq': sp.Eq,\n        'sympify': sp.sympify,\n        'simplify': sp.simplify,\n        'rad': sp.rad,\n        'deg': sp.deg,\n        'nsimplify': sp.nsimplify,\n        'summation': sp.summation,\n        'diff': sp.diff,\n        'exp': sp.exp,\n        'log': sp.log,\n        'Point3D': sp.Point3D,\n        'det': sp.det,\n    }\n    exec_locals = {}\n    try:\n        exec(problem_code, exec_globals, exec_locals)\n        result = exec_locals.get('result', 'No result found')\n        if isinstance(result, sp.Basic):  # Check if it is a SymPy expression\n            return sp.nsimplify(result)\n        return result\n    except sp.SympifyError as e:\n        return f\"Sympify Error: {e}, problem in parsing expressions.\"\n    except AttributeError as e:  # Handle specific attribute errors\n        attribute_name = str(e).split(\"'\")[1]  # Extract attribute name from error message\n        return f\"AttributeError: Module 'sympy' has no attribute '{attribute_name}'. \"\n    except Exception as e:\n        if \"Objects/dictobject.c\" in str(e):\n            return \"Unexpected internal error related to dictionary object handling.\"\n        return f\"Unexpected Error: {e}\"",
    "packages": "sympy, numpy"
  },
  "trig_transform": {
    "code": "from sympy import symbols, sin, cos, tan, csc, sec, cot, simplify\n\ndef trig_transform(expression):\n    try:\n        # Simplify the trigonometric expression\n        expr = simplify(expression)\n        return expr\n    except Exception as e:\n        return str(e)",
    "packages": "sympy"
  }
}